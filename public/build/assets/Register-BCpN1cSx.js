import{g as se,r as p,R as r,C as ye,c as be,a as ge}from"./CreateReactScript-fryF6WsV.js";import{J as ve}from"./JSEncrypt-D3I3x59l.js";import{A as Ee}from"./AuthRest-DlhUfdro.js";import{S as xe}from"./SelectFormGroup-DgCpZP3V.js";import{M as Re}from"./Modal-BlYbLNMj.js";import{S as ae}from"./sweetalert2.all-uggxmCrK.js";var le={exports:{}},Se="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ne=Se,_e=Ne;function pe(){}function de(){}de.resetWarningCache=pe;var we=function(){function e(a,t,s,f,E,u){if(u!==_e){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function n(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:de,resetWarningCache:pe};return o.PropTypes=o,o};le.exports=we();var Oe=le.exports;const y=se(Oe);var Te=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},B.apply(this,arguments)}function Le(e,n){if(e==null)return{};var o={},a=Object.keys(e),t,s;for(s=0;s<a.length;s++)t=a[s],!(n.indexOf(t)>=0)&&(o[t]=e[t]);return o}function j(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,K(e,n)}function K(e,n){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,t){return a.__proto__=t,a},K(e,n)}var F=function(e){Pe(n,e);function n(){var a;return a=e.call(this)||this,a.handleExpired=a.handleExpired.bind(j(a)),a.handleErrored=a.handleErrored.bind(j(a)),a.handleChange=a.handleChange.bind(j(a)),a.handleRecaptchaRef=a.handleRecaptchaRef.bind(j(a)),a}var o=n.prototype;return o.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},o.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},o.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var t=this;return new Promise(function(s,f){t.executionResolve=s,t.executionReject=f,t.execute()})},o.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},o.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var s=document.createElement("div");this._widgetId=t(s,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(s)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.handleRecaptchaRef=function(t){this.captcha=t},o.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var s=Le(t,Te);return p.createElement("div",B({},s,{ref:this.handleRecaptchaRef}))},n}(p.Component);F.displayName="ReCAPTCHA";F.propTypes={sitekey:y.string.isRequired,onChange:y.func,grecaptcha:y.object,theme:y.oneOf(["dark","light"]),type:y.oneOf(["image","audio"]),tabindex:y.number,onExpired:y.func,onErrored:y.func,size:y.oneOf(["compact","normal","invisible"]),stoken:y.string,hl:y.string,badge:y.oneOf(["bottomright","bottomleft","inline"]),isolated:y.bool};F.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var ue={exports:{}},i={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d=typeof Symbol=="function"&&Symbol.for,X=d?Symbol.for("react.element"):60103,Z=d?Symbol.for("react.portal"):60106,A=d?Symbol.for("react.fragment"):60107,k=d?Symbol.for("react.strict_mode"):60108,D=d?Symbol.for("react.profiler"):60114,M=d?Symbol.for("react.provider"):60109,U=d?Symbol.for("react.context"):60110,ee=d?Symbol.for("react.async_mode"):60111,q=d?Symbol.for("react.concurrent_mode"):60111,W=d?Symbol.for("react.forward_ref"):60112,z=d?Symbol.for("react.suspense"):60113,Ce=d?Symbol.for("react.suspense_list"):60120,H=d?Symbol.for("react.memo"):60115,V=d?Symbol.for("react.lazy"):60116,Ie=d?Symbol.for("react.block"):60121,$e=d?Symbol.for("react.fundamental"):60117,je=d?Symbol.for("react.responder"):60118,Fe=d?Symbol.for("react.scope"):60119;function v(e){if(typeof e=="object"&&e!==null){var n=e.$$typeof;switch(n){case X:switch(e=e.type,e){case ee:case q:case A:case D:case k:case z:return e;default:switch(e=e&&e.$$typeof,e){case U:case W:case V:case H:case M:return e;default:return n}}case Z:return n}}}function me(e){return v(e)===q}i.AsyncMode=ee;i.ConcurrentMode=q;i.ContextConsumer=U;i.ContextProvider=M;i.Element=X;i.ForwardRef=W;i.Fragment=A;i.Lazy=V;i.Memo=H;i.Portal=Z;i.Profiler=D;i.StrictMode=k;i.Suspense=z;i.isAsyncMode=function(e){return me(e)||v(e)===ee};i.isConcurrentMode=me;i.isContextConsumer=function(e){return v(e)===U};i.isContextProvider=function(e){return v(e)===M};i.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===X};i.isForwardRef=function(e){return v(e)===W};i.isFragment=function(e){return v(e)===A};i.isLazy=function(e){return v(e)===V};i.isMemo=function(e){return v(e)===H};i.isPortal=function(e){return v(e)===Z};i.isProfiler=function(e){return v(e)===D};i.isStrictMode=function(e){return v(e)===k};i.isSuspense=function(e){return v(e)===z};i.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===A||e===q||e===D||e===k||e===z||e===Ce||typeof e=="object"&&e!==null&&(e.$$typeof===V||e.$$typeof===H||e.$$typeof===M||e.$$typeof===U||e.$$typeof===W||e.$$typeof===$e||e.$$typeof===je||e.$$typeof===Fe||e.$$typeof===Ie)};i.typeOf=v;ue.exports=i;var Ae=ue.exports,te=Ae,ke={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},De={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Me={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},re={};re[te.ForwardRef]=Me;re[te.Memo]=fe;function oe(e){return te.isMemo(e)?fe:re[e.$$typeof]||ke}var Ue=Object.defineProperty,qe=Object.getOwnPropertyNames,ce=Object.getOwnPropertySymbols,We=Object.getOwnPropertyDescriptor,ze=Object.getPrototypeOf,ie=Object.prototype;function he(e,n,o){if(typeof n!="string"){if(ie){var a=ze(n);a&&a!==ie&&he(e,a,o)}var t=qe(n);ce&&(t=t.concat(ce(n)));for(var s=oe(e),f=oe(n),E=0;E<t.length;++E){var u=t[E];if(!De[u]&&!(o&&o[u])&&!(f&&f[u])&&!(s&&s[u])){var b=We(n,u);try{Ue(e,u,b)}catch{}}}}return e}var He=he;const Ve=se(He);function Y(){return Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},Y.apply(this,arguments)}function Ge(e,n){if(e==null)return{};var o={},a=Object.keys(e),t,s;for(s=0;s<a.length;s++)t=a[s],!(n.indexOf(t)>=0)&&(o[t]=e[t]);return o}function Be(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var R={},Ke=0;function Ye(e,n){return n=n||{},function(a){var t=a.displayName||a.name||"Component",s=function(E){Be(u,E);function u(x,l){var c;return c=E.call(this,x,l)||this,c.state={},c.__scriptURL="",c}var b=u.prototype;return b.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+Ke++),this.__scriptLoaderID},b.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},b.asyncScriptLoaderHandleLoad=function(l){var c=this;this.setState(l,function(){return c.props.asyncScriptOnLoad&&c.props.asyncScriptOnLoad(c.state)})},b.asyncScriptLoaderTriggerOnScriptLoaded=function(){var l=R[this.__scriptURL];if(!l||!l.loaded)throw new Error("Script is not loaded.");for(var c in l.observers)l.observers[c](l);delete window[n.callbackName]},b.componentDidMount=function(){var l=this,c=this.setupScriptURL(),h=this.asyncScriptLoaderGetScriptLoaderID(),g=n,T=g.globalName,O=g.callbackName,L=g.scriptId;if(T&&typeof window[T]<"u"&&(R[c]={loaded:!0,observers:{}}),R[c]){var N=R[c];if(N&&(N.loaded||N.errored)){this.asyncScriptLoaderHandleLoad(N);return}N.observers[h]=function(m){return l.asyncScriptLoaderHandleLoad(m)};return}var P={};P[h]=function(m){return l.asyncScriptLoaderHandleLoad(m)},R[c]={loaded:!1,observers:P};var S=document.createElement("script");S.src=c,S.async=!0;for(var I in n.attributes)S.setAttribute(I,n.attributes[I]);L&&(S.id=L);var C=function(_){if(R[c]){var G=R[c],w=G.observers;for(var ne in w)_(w[ne])&&delete w[ne]}};O&&typeof window<"u"&&(window[O]=function(){return l.asyncScriptLoaderTriggerOnScriptLoaded()}),S.onload=function(){var m=R[c];m&&(m.loaded=!0,C(function(_){return O?!1:(_(m),!0)}))},S.onerror=function(){var m=R[c];m&&(m.errored=!0,C(function(_){return _(m),!0}))},document.body.appendChild(S)},b.componentWillUnmount=function(){var l=this.__scriptURL;if(n.removeOnUnmount===!0)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h+=1)c[h].src.indexOf(l)>-1&&c[h].parentNode&&c[h].parentNode.removeChild(c[h]);var g=R[l];g&&(delete g.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete R[l])},b.render=function(){var l=n.globalName,c=this.props;c.asyncScriptOnLoad;var h=c.forwardedRef,g=Ge(c,["asyncScriptOnLoad","forwardedRef"]);return l&&typeof window<"u"&&(g[l]=typeof window[l]<"u"?window[l]:void 0),g.ref=h,p.createElement(a,g)},u}(p.Component),f=p.forwardRef(function(E,u){return p.createElement(s,Y({},E,{forwardedRef:u}))});return f.displayName="AsyncScriptLoader("+t+")",f.propTypes={asyncScriptOnLoad:y.func},Ve(f,a)}}var J="onloadcallback",Je="grecaptcha";function Q(){return typeof window<"u"&&window.recaptchaOptions||{}}function Qe(){var e=Q(),n=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+n+"/recaptcha/enterprise.js?onload="+J+"&render=explicit":"https://"+n+"/recaptcha/api.js?onload="+J+"&render=explicit"}const Xe=Ye(Qe,{callbackName:J,globalName:Je,attributes:Q().nonce?{nonce:Q().nonce}:{}})(F),Ze=({html:e})=>r.createElement("div",{dangerouslySetInnerHTML:{__html:e}}),et=({PUBLIC_RSA_KEY:e,RECAPTCHA_SITE_KEY:n,token:o,terms:a="Terminos y condiciones"})=>{document.title="Registro | Atalaya";const t=new ve;t.setPublicKey(e);const[s,f]=p.useState(!0),[E,u]=p.useState(null),[b,x]=p.useState(!1),l=p.useRef(),c=p.useRef(),h=p.useRef(),g=p.useRef(),T=p.useRef(),O=p.useRef(),L=p.useRef(),N=p.useRef(),P=p.useRef();p.useEffect(()=>{f(!1)},[null]);const S=async C=>{C.preventDefault(),f(!0);const m=O.current.value,_=L.current.value;if(m!=_)return ae.fire({icon:"warning",title:"Error",text:"Las contraseñas no coinciden",confirmButtonText:"Ok"});if(!E)return ae.fire({icon:"warning",title:"Error",text:"Por favor, complete el captcha",confirmButtonText:"Ok"});const G={document_type:$(l.current).val(),document_number:c.current.value,name:h.current.value,lastname:g.current.value,email:T.current.value,password:t.encrypt(m),confirmation:t.encrypt(_),terms:N.current.checked,captcha:E,_token:o},w=await Ee.signup(G);if(!w)return f(!1);w&&(location.href=`./confirm-email/${w}`),f(!1)},I=C=>{c.current.value="",x(!1)};return r.createElement(r.Fragment,null,r.createElement("div",{className:"account-pages mt-5 mb-5"},r.createElement("div",{className:"container"},r.createElement("div",{className:"row justify-content-center"},r.createElement("div",{className:"col-md-8 col-lg-6 col-xl-4"},r.createElement("div",{className:"text-center"},r.createElement("a",{href:"/"},r.createElement("img",{src:"/assets/img/logo-dark.svg",alt:"",height:"22",className:"mx-auto",style:{height:"22px"}})),r.createElement("p",{className:"text-muted mt-2 mb-4"},"Atalaya by Mundo Web")),r.createElement("div",{className:"card"},r.createElement("div",{className:"card-body p-4"},r.createElement("div",{className:"text-center mb-4"},r.createElement("h4",{className:"text-uppercase mt-0 font-bold"},"Registrate")),r.createElement("form",{onSubmit:S,className:"row"},r.createElement("div",{className:"col-sm-6 mb-2"},r.createElement("label",{htmlFor:"document_type",className:"form-label"},"Tipo documento ",r.createElement("b",{className:"text-danger"},"*")),r.createElement(xe,{eRef:l,onChange:I,required:!0},r.createElement("option",{value:"DNI"},"DNI - Documento Nacional de Identidad"),r.createElement("option",{value:"CE"},"CE - Carnet de Extranjeria"))),r.createElement("div",{className:"col-sm-6 mb-2"},r.createElement("label",{htmlFor:"document_number",className:"form-label"},"Numero documento ",r.createElement("b",{className:"text-danger"},"*")),r.createElement("input",{ref:c,className:"form-control",type:"text",id:"document_number",placeholder:"Ingrese su documento",required:!0})),r.createElement("div",{className:"col-sm-6 mb-2"},r.createElement("label",{htmlFor:"name",className:"form-label"},"Nombres ",r.createElement("b",{className:"text-danger"},"*")),r.createElement("input",{ref:h,className:"form-control",type:"text",id:"name",placeholder:"Ingrese su nombre",required:!0})),r.createElement("div",{className:"col-sm-6 mb-2"},r.createElement("label",{htmlFor:"lastname",className:"form-label"},"Apellidos ",r.createElement("b",{className:"text-danger"},"*")),r.createElement("input",{ref:g,className:"form-control",type:"text",id:"lastname",placeholder:"Ingrese sus apellidos",required:!0})),r.createElement("div",{className:"col-12 mb-2"},r.createElement("label",{htmlFor:"email",className:"form-label"},"Correo electronico ",r.createElement("b",{className:"text-danger"},"*")),r.createElement("input",{ref:T,className:"form-control",type:"email",id:"email",required:!0,placeholder:"Ingrese su correo electronico"})),r.createElement("div",{className:"col-sm-6 mb-2"},r.createElement("label",{htmlFor:"password",className:"form-label"},"Contraseña ",r.createElement("b",{className:"text-danger"},"*")),r.createElement("input",{ref:O,className:"form-control",type:"password",required:!0,id:"password",placeholder:"Ingrese su contraseña"})),r.createElement("div",{className:"col-sm-6 mb-3"},r.createElement("label",{htmlFor:"confirmation",className:"form-label"},"Confirmacion ",r.createElement("b",{className:"text-danger"},"*")),r.createElement("input",{ref:L,className:"form-control",type:"password",required:!0,id:"confirmation",placeholder:"Confirme su contraseña"})),r.createElement("div",{className:"col-12 mb-3"},r.createElement("div",{className:"form-check mx-auto",style:{width:"max-content"}},r.createElement("input",{ref:N,type:"checkbox",className:"form-check-input",id:"checkbox-signup",required:!0}),r.createElement("label",{className:"form-check-label",htmlFor:"checkbox-signup"},"Acepto los",r.createElement("a",{href:"#terms",className:"ms-1 text-blue",onClick:()=>$(P.current).modal("show")},"terminos y condiciones")))),r.createElement(Xe,{className:"m-auto mb-3",sitekey:n,onChange:u,style:{display:"block",width:"max-content"}}),r.createElement("div",{className:"mb-0 text-center d-grid"},r.createElement("button",{className:"btn btn-primary",type:"submit",disabled:s},s?r.createElement(r.Fragment,null,r.createElement("i",{className:"fa fa-spinner fa-spin"})," Verificando"):"Registrarme"))))),r.createElement("div",{className:"row mt-3"},r.createElement("div",{className:"col-12 text-center"},r.createElement("p",{className:"text-muted"},"Ya tienes una cuenta? ",r.createElement(ge,{href:"/login",className:"text-dark ms-1"},r.createElement("b",null,"Iniciar sesion"))))))))),r.createElement(Re,{modalRef:P,title:"Terminos y condiciones",size:"lg",hideFooter:!0},r.createElement(Ze,{html:a})))};ye((e,n)=>{be(e).render(r.createElement(et,{...n}))});
